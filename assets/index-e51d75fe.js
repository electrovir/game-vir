(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function zt(t,e){return t.filter((r,s)=>!e.includes(s))}function Wt(t,e){return t.includes(e)}async function Bt(t,e){await It(t,e)}async function It(t,e){return await t.reduce(async(s,n,i,o)=>{const a=await s,c=await e(n,i,o);return a.push(c),a},Promise.resolve([]))}function ct(t){return!!t}const qt={capitalizeFirstLetter:!1};function Jt(t){return t.length?t[0].toUpperCase()+t.slice(1):""}function Kt(t,e){return e.capitalizeFirstLetter?Jt(t):t}function Gt(t,e=qt){const r=t.toLowerCase();if(!r.length)return"";const s=r.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,n=>{const i=n[1];return i?i.toUpperCase():""});return Kt(s,e)}var O;(function(t){t.Upper="upper",t.Lower="lower"})(O||(O={}));function Yt(t){return t.toLowerCase()!==t.toUpperCase()}function ze(t,e,r){if(!t&&(r!=null&&r.blockNoCaseCharacters))return!1;for(let s=0;s<t.length;s++){const n=t[s]||"";if(!Yt(n)){if(r!=null&&r.blockNoCaseCharacters)return!1;continue}if(e===O.Upper&&n!==n.toUpperCase())return!1;if(e===O.Lower&&n!==n.toLowerCase())return!1}return!0}function Zt(t){return t.split("").reduce((r,s,n,i)=>{const o=n>0&&i[n-1]||"",a=n<i.length-1&&i[n+1]||"",c=ze(o,O.Lower,{blockNoCaseCharacters:!0})||ze(a,O.Lower,{blockNoCaseCharacters:!0});return s===s.toLowerCase()||n===0||!c?r+=s:r+=`-${s.toLowerCase()}`,r},"").toLowerCase()}function lt({max:t,min:e,value:r}){return r>t?e:r<e?t:r}function Qt(t){const e=Math.pow(10,t.digits),r=t.number*e;return Number((Math.round(r)/e).toFixed(t.digits))}const Xt=[(t,e)=>e in t,(t,e)=>e in t.constructor.prototype];function b(t,e){return t?Xt.some(r=>{try{return r(t,e)}catch{return!1}}):!1}async function ut(t){return await Promise.resolve().then(()=>t())}function ne(t){return t?t instanceof Error?t.message:b(t,"message")?String(t.message):String(t):""}function ie(t){return t instanceof Error?t:new Error(ne(t))}class er extends Error{constructor(){super(...arguments),this.name="AssertionError"}}function _e(t){return Array.isArray(t)?"array":typeof t}function y(t,e){return _e(t)===e}function We(t,e,r){if(!(t instanceof e))throw new er(r||"instanceof assertion failed")}function E(t){return!!t&&typeof t=="object"}function tr(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw console.error("Failed to JSON copy for",t),e}}function v(t){let e;try{e=Reflect.ownKeys(t)}catch{}return e??[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rr(t){return v(t).filter(e=>isNaN(Number(e)))}function sr(t){return rr(t).map(r=>t[r])}function oe(t,e){let r=!1;const s=v(t).reduce((n,i)=>{const o=e(i,t[i],t);return o instanceof Promise&&(r=!0),{...n,[i]:o}},{});return r?new Promise(async(n,i)=>{try{await Promise.all(v(s).map(async o=>{const a=await s[o];s[o]=a})),n(s)}catch(o){i(o)}}):s}function nr(t,e){try{return ir(t,e),!0}catch{return!1}}function ir(t,e,r){if(t.length<e)throw new Error(r?`'${r}' is not at least '${e}' in length.`:`Array is not at least '${e}' in length.`)}function Z(...t){if(!nr(t,1))return{};if(t.length===1)return t[0];let e;const r={};return t.forEach(s=>{try{if(!E(s)){e=s;return}Object.entries(s).forEach(([n,i])=>{r[n]||(r[n]=[]),r[n].push(i)}),e||(y(s,"array")?e=[...s]:e={...s})}catch{}}),Object.entries(r).forEach(([s,n])=>{const i=Z(...n);i===void 0&&s in e?delete e[s]:i!==void 0&&(e[s]=i)}),y(e,"array")&&(e=e.filter(s=>s!==void 0)),e}function Ee(t,e){const r=e,s=t;if(y(s,"array"))return s.map(o=>Ee(o,e));const n=r[0];if(!b(s,n))return;const i=s[n];return r.length>1?Ee(i,r.slice(1)):i}function ht(){let t,e,r=!1;const s=new Promise((n,i)=>{t=o=>(r=!0,n(o)),e=o=>{r=!0,i(o)}});if(!t||!e)throw new Error(`Reject and resolve callbacks were not set by the promise constructor for ${ht.name}.`);return{promise:s,resolve:t,reject:e,isSettled(){return r}}}function or(t){const e=ht();return t!==1/0&&setTimeout(()=>{e.resolve()},t<=0?0:t),e.promise}const ar="%";function Be(t){return cr({value:t,suffix:ar})}function cr({value:t,suffix:e}){return String(t).endsWith(e)?String(t):`${String(t)}${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Q=globalThis,Te=Q.ShadowRoot&&(Q.ShadyCSS===void 0||Q.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Le=Symbol(),Ie=new WeakMap;let dt=class{constructor(e,r,s){if(this._$cssResult$=!0,s!==Le)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Te&&e===void 0){const s=r!==void 0&&r.length===1;s&&(e=Ie.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&Ie.set(r,e))}return e}toString(){return this.cssText}};const A=t=>new dt(typeof t=="string"?t:t+"",void 0,Le),X=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((s,n,i)=>s+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1],t[0]);return new dt(r,t,Le)},lr=(t,e)=>{if(Te)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const s=document.createElement("style"),n=Q.litNonce;n!==void 0&&s.setAttribute("nonce",n),s.textContent=r.cssText,t.appendChild(s)}},qe=Te?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const s of e.cssRules)r+=s.cssText;return A(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:ur,defineProperty:hr,getOwnPropertyDescriptor:dr,getOwnPropertyNames:fr,getOwnPropertySymbols:pr,getPrototypeOf:mr}=Object,_=globalThis,Je=_.trustedTypes,gr=Je?Je.emptyScript:"",ge=_.reactiveElementPolyfillSupport,V=(t,e)=>t,re={toAttribute(t,e){switch(e){case Boolean:t=t?gr:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Oe=(t,e)=>!ur(t,e),Ke={attribute:!0,type:String,converter:re,reflect:!1,hasChanged:Oe};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),_.litPropertyMetadata??(_.litPropertyMetadata=new WeakMap);class L extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Ke){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){const s=Symbol(),n=this.getPropertyDescriptor(e,s,r);n!==void 0&&hr(this.prototype,e,n)}}static getPropertyDescriptor(e,r,s){const{get:n,set:i}=dr(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);i.call(this,o),this.requestUpdate(e,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Ke}static _$Ei(){if(this.hasOwnProperty(V("elementProperties")))return;const e=mr(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(V("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(V("properties"))){const r=this.properties,s=[...fr(r),...pr(r)];for(const n of s)this.createProperty(n,r[n])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[s,n]of r)this.elementProperties.set(s,n)}this._$Eh=new Map;for(const[r,s]of this.elementProperties){const n=this._$Eu(r,s);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const n of s)r.unshift(qe(n))}else e!==void 0&&r.push(qe(e));return r}static _$Eu(e,r){const s=r.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$Eg=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$ES(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$E_??(this._$E_=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$E_)==null||r.delete(e)}_$ES(){const e=new Map,r=this.constructor.elementProperties;for(const s of r.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return lr(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$E_)==null||e.forEach(r=>{var s;return(s=r.hostConnected)==null?void 0:s.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$E_)==null||e.forEach(r=>{var s;return(s=r.hostDisconnected)==null?void 0:s.call(r)})}attributeChangedCallback(e,r,s){this._$AK(e,s)}_$EO(e,r){var i;const s=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,s);if(n!==void 0&&s.reflect===!0){const o=(((i=s.converter)==null?void 0:i.toAttribute)!==void 0?s.converter:re).toAttribute(r,s.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,r){var i;const s=this.constructor,n=s._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const o=s.getPropertyOptions(n),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)==null?void 0:i.fromAttribute)!==void 0?o.converter:re;this._$Em=n,this[n]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(e,r,s,n=!1,i){if(e!==void 0){if(s??(s=this.constructor.getPropertyOptions(e)),!(s.hasChanged??Oe)(n?i:this[e],r))return;this.C(e,r,s)}this.isUpdatePending===!1&&(this._$Eg=this._$EP())}C(e,r,s){this._$AL.has(e)||this._$AL.set(e,r),s.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var s;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[i,o]of n)o.wrapped!==!0||this._$AL.has(i)||this[i]===void 0||this.C(i,this[i],o)}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(s=this._$E_)==null||s.forEach(n=>{var i;return(i=n.hostUpdate)==null?void 0:i.call(n)}),this.update(r)):this._$ET()}catch(n){throw e=!1,this._$ET(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$E_)==null||r.forEach(s=>{var n;return(n=s.hostUpdated)==null?void 0:n.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EO(r,this[r]))),this._$ET()}updated(e){}firstUpdated(e){}}L.elementStyles=[],L.shadowRootOptions={mode:"open"},L[V("elementProperties")]=new Map,L[V("finalized")]=new Map,ge==null||ge({ReactiveElement:L}),(_.reactiveElementVersions??(_.reactiveElementVersions=[])).push("2.0.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const D=globalThis,se=D.trustedTypes,Ge=se?se.createPolicy("lit-html",{createHTML:t=>t}):void 0,ft="$lit$",w=`lit$${(Math.random()+"").slice(9)}$`,pt="?"+w,yr=`<${pt}>`,T=document,H=()=>T.createComment(""),j=t=>t===null||typeof t!="object"&&typeof t!="function",mt=Array.isArray,vr=t=>mt(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",ye=`[ 	
\f\r]`,k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ye=/-->/g,Ze=/>/g,C=RegExp(`>|${ye}(?:([^\\s"'>=/]+)(${ye}*=${ye}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Qe=/'/g,Xe=/"/g,gt=/^(?:script|style|textarea|title)$/i,$r=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),wr=$r(1),$=Symbol.for("lit-noChange"),f=Symbol.for("lit-nothing"),et=new WeakMap,x=T.createTreeWalker(T,129);function yt(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ge!==void 0?Ge.createHTML(e):e}const br=(t,e)=>{const r=t.length-1,s=[];let n,i=e===2?"<svg>":"",o=k;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===k?u[1]==="!--"?o=Ye:u[1]!==void 0?o=Ze:u[2]!==void 0?(gt.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=C):u[3]!==void 0&&(o=C):o===C?u[0]===">"?(o=n??k,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?C:u[3]==='"'?Xe:Qe):o===Xe||o===Qe?o=C:o===Ye||o===Ze?o=k:(o=C,n=void 0);const p=o===C&&t[a+1].startsWith("/>")?" ":"";i+=o===k?c+yr:h>=0?(s.push(l),c.slice(0,h)+ft+c.slice(h)+w+p):c+w+(h===-2?a:p)}return[yt(t,i+(t[r]||"<?>")+(e===2?"</svg>":"")),s]};class z{constructor({strings:e,_$litType$:r},s){let n;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=br(e,r);if(this.el=z.createElement(l,s),x.currentNode=this.el.content,r===2){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(n=x.nextNode())!==null&&c.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const h of n.getAttributeNames())if(h.endsWith(ft)){const d=u[o++],p=n.getAttribute(h).split(w),m=/([.?@])?(.*)/.exec(d);c.push({type:1,index:i,name:m[2],strings:p,ctor:m[1]==="."?Er:m[1]==="?"?Sr:m[1]==="@"?Cr:ae}),n.removeAttribute(h)}else h.startsWith(w)&&(c.push({type:6,index:i}),n.removeAttribute(h));if(gt.test(n.tagName)){const h=n.textContent.split(w),d=h.length-1;if(d>0){n.textContent=se?se.emptyScript:"";for(let p=0;p<d;p++)n.append(h[p],H()),x.nextNode(),c.push({type:2,index:++i});n.append(h[d],H())}}}else if(n.nodeType===8)if(n.data===pt)c.push({type:2,index:i});else{let h=-1;for(;(h=n.data.indexOf(w,h+1))!==-1;)c.push({type:7,index:i}),h+=w.length-1}i++}}static createElement(e,r){const s=T.createElement("template");return s.innerHTML=e,s}}function N(t,e,r=t,s){var o,a;if(e===$)return e;let n=s!==void 0?(o=r._$Co)==null?void 0:o[s]:r._$Cl;const i=j(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==i&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),i===void 0?n=void 0:(n=new i(t),n._$AT(t,r,s)),s!==void 0?(r._$Co??(r._$Co=[]))[s]=n:r._$Cl=n),n!==void 0&&(e=N(t,n._$AS(t,e.values),n,s)),e}class _r{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:s}=this._$AD,n=((e==null?void 0:e.creationScope)??T).importNode(r,!0);x.currentNode=n;let i=x.nextNode(),o=0,a=0,c=s[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new B(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Pr(i,this,e)),this._$AV.push(l),c=s[++a]}o!==(c==null?void 0:c.index)&&(i=x.nextNode(),o++)}return x.currentNode=T,n}p(e){let r=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,r),r+=s.strings.length-2):s._$AI(e[r])),r++}}class B{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,s,n){this.type=2,this._$AH=f,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=s,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=N(this,e,r),j(e)?e===f||e==null||e===""?(this._$AH!==f&&this._$AR(),this._$AH=f):e!==this._$AH&&e!==$&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):vr(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==f&&j(this._$AH)?this._$AA.nextSibling.data=e:this.$(T.createTextNode(e)),this._$AH=e}g(e){var i;const{values:r,_$litType$:s}=e,n=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=z.createElement(yt(s.h,s.h[0]),this.options)),s);if(((i=this._$AH)==null?void 0:i._$AD)===n)this._$AH.p(r);else{const o=new _r(n,this),a=o.u(this.options);o.p(r),this.$(a),this._$AH=o}}_$AC(e){let r=et.get(e.strings);return r===void 0&&et.set(e.strings,r=new z(e)),r}T(e){mt(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let s,n=0;for(const i of e)n===r.length?r.push(s=new B(this.k(H()),this.k(H()),this,this.options)):s=r[n],s._$AI(i),n++;n<r.length&&(this._$AR(s&&s._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class ae{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,s,n,i){this.type=1,this._$AH=f,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=i,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=f}_$AI(e,r=this,s,n){const i=this.strings;let o=!1;if(i===void 0)e=N(this,e,r,0),o=!j(e)||e!==this._$AH&&e!==$,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=N(this,a[s+c],r,c),l===$&&(l=this._$AH[c]),o||(o=!j(l)||l!==this._$AH[c]),l===f?e=f:e!==f&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!n&&this.O(e)}O(e){e===f?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Er extends ae{constructor(){super(...arguments),this.type=3}O(e){this.element[this.name]=e===f?void 0:e}}class Sr extends ae{constructor(){super(...arguments),this.type=4}O(e){this.element.toggleAttribute(this.name,!!e&&e!==f)}}class Cr extends ae{constructor(e,r,s,n,i){super(e,r,s,n,i),this.type=5}_$AI(e,r=this){if((e=N(this,e,r,0)??f)===$)return;const s=this._$AH,n=e===f&&s!==f||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,i=e!==f&&(s===f||n);n&&this.element.removeEventListener(this.name,this,s),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class Pr{constructor(e,r,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){N(this,e)}}const ve=D.litHtmlPolyfillSupport;ve==null||ve(z,B),(D.litHtmlVersions??(D.litHtmlVersions=[])).push("3.1.0");const Ar=(t,e,r)=>{const s=(r==null?void 0:r.renderBefore)??e;let n=s._$litPart$;if(n===void 0){const i=(r==null?void 0:r.renderBefore)??null;s._$litPart$=n=new B(e.insertBefore(H(),i),i,void 0,r??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class F extends L{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ar(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return $}}var at;F._$litElement$=!0,F.finalized=!0,(at=globalThis.litElementHydrateSupport)==null||at.call(globalThis,{LitElement:F});const $e=globalThis.litElementPolyfillSupport;$e==null||$e({LitElement:F});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vt={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ce=t=>(...e)=>({_$litDirective$:t,values:e});class I{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,s){this._$Ct=e,this._$AM=r,this._$Ci=s}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Se extends I{constructor(e){if(super(e),this.et=f,e.type!==vt.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===f||e==null)return this.vt=void 0,this.et=e;if(e===$)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.vt;this.et=e;const r=[e];return r.raw=r,this.vt={_$litType$:this.constructor.resultType,strings:r,values:[]}}}Se.directiveName="unsafeHTML",Se.resultType=1;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class tt extends Se{}tt.directiveName="unsafeSVG",tt.resultType=2;class $t extends F{}function wt(t){if(E(t))return oe(t,(r,s)=>{if(!y(r,"string"))throw new Error(`Invalid CSS var name '${String(r)}' given. CSS var names must be strings.`);if(Zt(r).toLowerCase()!==r)throw new Error(`Invalid CSS var name '${r}' given. CSS var names must be in lower kebab case.`);const i=s,o=r.startsWith("--")?A(r):r.startsWith("-")?X`-${A(r)}`:X`--${A(r)}`;return{name:o,value:X`var(${o}, ${A(i)})`,default:String(i)}});throw new Error(`Invalid setup input for '${wt.name}' function.`)}function xr(t,e,r){const s=!e.length&&!r.length,n=t.length?!1:!e.filter(a=>!!a.index).length;if(s||n)return[...t];const i=t.map(a=>[a]);return i.length||(i[0]=[]),r.forEach(a=>{a>=0&&a<t.length&&(i[a]=[])}),e.forEach(a=>{const c=i[a.index];c&&c.splice(0,0,...a.values)}),i.flat()}function Ce(t){return b(t,"_elementVirIsWrappedDefinition")&&!!t._elementVirIsWrappedDefinition}function Ne(t){return b(t,"tagName")&&!!t.tagName&&typeof t.tagName=="string"&&t.tagName.includes("-")}function bt(t){return t.map(e=>Ce(e)?e.definition:e).filter(e=>Ne(e))}const _t=new WeakMap;function Tr(t,e){var n;const r=bt(e);return(n=Et(_t,[t,...r]).value)==null?void 0:n.template}function Lr(t,e,r){const s=bt(e);return Ct(_t,[t,...s],r)}function Et(t,e,r=0){const{currentTemplateAndNested:s,reason:n}=St(t,e,r);return s?r===e.length-1?{value:s,reason:"reached end of keys array"}:s.nested?Et(s.nested,e,r+1):{value:void 0,reason:`map at key index ${r} did not have nested maps`}:{value:s,reason:n}}function St(t,e,r){const s=e[r];if(s==null)return{currentKey:void 0,currentTemplateAndNested:void 0,reason:`key at index ${r} not found`};if(!t.has(s))return{currentKey:s,currentTemplateAndNested:void 0,reason:`key at index ${r} was not in the map`};const n=t.get(s);return n==null?{currentKey:s,currentTemplateAndNested:void 0,reason:`value at key at index ${r} was undefined`}:{currentKey:s,currentTemplateAndNested:n,reason:"key and value exists"}}function Ct(t,e,r,s=0){const{currentTemplateAndNested:n,currentKey:i,reason:o}=St(t,e,s);if(!i)return{result:!1,reason:o};const a=n??{nested:void 0,template:void 0};if(n||t.set(i,a),s===e.length-1)return a.template=r,{result:!0,reason:"set value at end of keys array"};const c=a.nested??new WeakMap;return a.nested||(a.nested=c),Ct(c,e,r,s+1)}const Or=new WeakMap;function Pt(t,e,r){const s=Tr(t,e),n=s??r();if(!s){const a=Lr(t,e,n);if(a.result)Or.set(t,n);else throw new Error(`Failed to set template transform: ${a.reason}`)}const i=n.valuesTransform(e),o=xr(e,i.valueInsertions,i.valueIndexDeletions);return{strings:n.templateStrings,values:o}}function At(t,e,r,s){const n=[],i=[],o=[],a=[];return t.forEach((l,u)=>{const h=n.length-1,d=n[h],p=u-1,m=e[p];s&&s(l);let S,R=[];if(typeof d=="string"&&(S=r(d,l,m),S)){n[h]=d+S.replacement,o.push(p);const J=S.getExtraValues;R=J?J(m):[],R.length&&J?(n[h]+=" ",R.forEach((je,me)=>{me&&n.push(" ")}),a.push(je=>{const me=je[p],jt=J(me);return{index:p,values:jt}}),n.push(l)):n[h]+=l}S||n.push(l);const He=t.raw[u];S?(i[h]=i[h]+S.replacement+He,R.length&&R.forEach(()=>{i.push("")})):i.push(He)}),{templateStrings:Object.assign([],n,{raw:i}),valuesTransform(l){const u=a.map(h=>h(l)).flat();return{valueIndexDeletions:o,valueInsertions:u}}}}function Nr(...[t,e,r]){if(Ne(r))return{replacement:r.tagName,getExtraValues:void 0}}function Mr(t,e){return At(t,e,Nr)}function le(t,...e){const r=Pt(t,e,()=>Mr(t,e));return X(r.strings,...r.values)}const Me=Symbol("key for ignoring inputs not having been set yet"),Rr={[Me]:!0,allowPolymorphicState:!1};function xt(t){const e=t.getRootNode();if(!(e instanceof ShadowRoot))return!1;const r=e.host;return r instanceof $t?!0:xt(r)}function Tt(t,e){const r=t.instanceState;v(e).forEach(s=>{if(r&&s in r)throw new Error(`Cannot set input '${s}' on '${t.tagName}'. '${t.tagName}' already has a state property with the same name.`);"instanceInputs"in t?t.instanceInputs[s]=e[s]:t[s]=e[s]}),"instanceInputs"in t&&v(t.instanceInputs).forEach(s=>{s in e||(t.instanceInputs[s]=void 0)}),kr(t)}function kr(t){t._haveInputsBeenSet||(t._haveInputsBeenSet=!0)}function rt(t,e){const r=[t,"-"].join("");Object.keys(e).forEach(s=>{if(!s.startsWith(r))throw new Error(`Invalid CSS property name '${s}' in '${t}': CSS property names must begin with the element's tag name.`)})}class Ur extends CustomEvent{get type(){return this._type}constructor(e,r){super(typeof e=="string"?e:e.type,{detail:r,bubbles:!0,composed:!0}),this._type=""}}function Lt(){return t=>{var e;return e=class extends Ur{constructor(r){super(t,r),this._type=t}},e.type=t,e}}function ee(){return Lt()}function Vr(t,e){return e?Object.keys(e).filter(r=>{if(typeof r!="string")throw new Error(`Expected event key of type string but got type "${typeof r}" for key ${String(r)}`);if(r==="")throw new Error("Got empty string for events key.");return!0}).reduce((r,s)=>{const n=Lt()([t,s].join("-"));return r[s]=n,r},{}):{}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dr={attribute:!0,type:String,converter:re,reflect:!1,hasChanged:Oe},Fr=(t=Dr,e,r)=>{const{kind:s,metadata:n}=r;let i=globalThis.litPropertyMetadata.get(n);if(i===void 0&&globalThis.litPropertyMetadata.set(n,i=new Map),i.set(r.name,t),s==="accessor"){const{name:o}=r;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t),a}}}if(s==="setter"){const{name:o}=r;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+s)};function Hr(t){return(e,r)=>typeof r=="object"?Fr(t,e,r):((s,n,i)=>{const o=n.hasOwnProperty(i);return n.constructor.createProperty(i,o?{...s,wrapped:!0}:s),o?Object.getOwnPropertyDescriptor(n,i):void 0})(t,e,r)}const jr="_elementVirStateSetup";function zr(t){return E(t)?jr in t:!1}function Wr(t,e){const r=(t==null?void 0:t.constructor)===(e==null?void 0:e.constructor);return _e(t)===_e(e)&&r}const Ot=Symbol("and"),Nt=Symbol("or"),Mt=Symbol("exact"),Rt=Symbol("enum"),Re=Symbol("unknown"),kt="__vir__shape__definition__key__do__not__use__in__actual__objects";function Ut(t){return b(t,kt)}const Vt="__vir__shape__specifier__key__do__not__use__in__actual__objects",Br=[Ot,Nt,Mt,Rt,Re];function Ir(){return qr([],Re)}function ue(t){return q(t,Nt)}function ke(t){return q(t,Ot)}function Ue(t){return q(t,Mt)}function Ve(t){return q(t,Rt)}function De(t){return q(t,Re)}function q(t,e){const r=he(t);return!!r&&r.specifierType===e}function qr(t,e){return{[Vt]:!0,specifierType:e,parts:t}}function te(t,e){const r=he(e);if(r){if(ke(r))return r.parts.every(s=>te(t,s));if(ue(r))return r.parts.some(s=>te(t,s));if(Ue(r))return E(t)?te(t,r.parts[0]):t===r.parts[0];if(Ve(r))return Object.values(r.parts[0]).some(s=>s===t);if(De(r))return!0}return Wr(t,e)}function he(t){if(E(t)&&b(t,Vt)){if(!b(t,"parts")||!y(t.parts,"array"))throw new Error("Found a shape specifier but its parts are not valid.");if(!b(t,"specifierType")||!Wt(Br,t.specifierType))throw new Error("Found a shape specifier but its specifier type is not valid.");return t}}function Pe(t,e=!1){return Ae(t)}function Ae(t){const e=he(t);if(e){if(ue(e)||Ue(e))return Ae(e.parts[0]);if(ke(e))return e.parts.reduce((r,s)=>Object.assign(r,Ae(s)),{});if(Ve(e))return Object.values(e.parts[0])[0];if(De(e))return"unknown";throw new Error(`found specifier but it matches no expected specifiers: ${String(e.specifierType)}`)}return Ut(t)?Pe(t.shape):t instanceof RegExp||y(t,"array")?t:E(t)?oe(t,(r,s)=>Pe(s)):t}function Jr(t,e=!1){return{shape:t,get runTimeType(){throw new Error("runTimeType cannot be used as a value, it is only for types.")},isReadonly:e,defaultValue:Pe(t),[kt]:!0}}class g extends Error{constructor(){super(...arguments),this.name="ShapeMismatchError"}}function Kr(t,e,r={}){try{return Gr(t,e,r),!0}catch{return!1}}function Gr(t,e,r={}){P(t,e.shape,["top level"],{exactValues:!1,ignoreExtraKeys:!!r.allowExtraKeys})}function Dt(t){return[t[0],...t.slice(1).map(e=>`'${String(e)}'`)].join(" -> ")}function P(t,e,r,s){if(De(e))return!0;if(Ut(e))return P(t,e.shape,r,s);const n=Dt(r);if(he(t))throw new g(`Shape test subjects cannot be contain shape specifiers but one was found at ${n}.`);if(!te(t,e))throw new g(`Subject does not match shape definition at key ${n}`);if(y(e,"function"))return y(t,"function");if(E(t)){const o=t,a=s.ignoreExtraKeys?{}:Object.fromEntries(Object.keys(o).map(l=>[l,!1]));let c=!1;if(ue(e))c=e.parts.some(l=>{try{const u=P(t,l,r,{...s});return Object.assign(a,u),!0}catch(u){if(u instanceof g)return!1;throw u}});else if(ke(e))c=e.parts.every(l=>{try{const u=P(t,l,r,{...s,ignoreExtraKeys:!0});return Object.assign(a,u),!0}catch(u){if(u instanceof g)return!1;throw u}});else if(Ue(e)){const l=P(t,e.parts[0],r,{...s,exactValues:!0});Object.assign(a,l),c=!0}else{if(Ve(e))throw new g(`Cannot compare an enum specifier to an object at ${n}`);if(y(e,"array")&&y(o,"array"))c=o.every((l,u)=>{const h=e.some(d=>{try{return P(l,d,[...r,u],s),!0}catch(p){if(p instanceof g)return!1;throw p}});return a[u]=h,h});else{const l=Yr({keys:r,options:s,shape:e,subject:t});Object.assign(a,l),c=!0}}if(!c){const u=`Failed on key(s): ${Object.keys(a).filter(h=>!a[h]).join(",")}`;throw new g(u)}return s.ignoreExtraKeys||Object.entries(a).forEach(([l,u])=>{if(!u)throw new g(`subject as extra key '${l}' in ${n}.`)}),a}else if(s.exactValues)return t===e;return!0}function Yr({keys:t,options:e,shape:r,subject:s}){const n=Dt(t),i={};if(E(r)){const o=new Set(v(s)),a=new Set(v(r));e.ignoreExtraKeys||o.forEach(c=>{if(!a.has(c))throw new g(`Subject has extra key '${String(c)}' in ${n}`)}),a.forEach(c=>{var d;const l=r[c],u=ue(l)?l.parts.includes(void 0):!1,h=((d=l==null?void 0:l.includes)==null?void 0:d.call(l,void 0))||l===void 0;if(!o.has(c)&&!u&&!h)throw new g(`Subject missing key '${String(c)}' in ${n}`)}),o.forEach(c=>{const l=s[c];if(e.ignoreExtraKeys&&!a.has(c))return;const u=r[c];P(l,u,[...t,c],e),i[c]=!0})}else throw new g(`shape definition at ${n} was not an object.`);return i}const Zr=Jr({addListener(){return!1},removeListener(){return!1},value:Ir()});function we(t){return Kr(t,Zr,{allowExtraKeys:!0})}function Ft(t,e){e in t||Hr()(t,e)}function Qr(t,e,r){if(typeof t!="string"&&typeof t!="number"&&typeof t!="symbol")throw new Error(`Property name must be a string, got type '${typeof t}' from: '${String(t)}' for '${r.toLowerCase()}'`);if(!(t in e))throw new Error(`Property '${String(t)}' does not exist on '${r.toLowerCase()}'.`)}function st(t,e){const r=t;function s(o){e?Qr(o,t,t.tagName):Ft(t,o)}function n(o,a){return s(a),r[a]}return new Proxy({},{get:n,set(o,a,c){const l=zr(c)?c._elementVirStateSetup():c;s(a);const u=r[a];function h(m){o[a]=m,r[a]=m}const d=t.observablePropertyListenerMap[a];if(u!==l&&we(u)&&(d!=null&&d.length)&&u.removeListener(d),we(l))if(d)l.addListener(d);else{let m=function(){t.requestUpdate()};var p=m;t.observablePropertyListenerMap[a]=m,l.addListener(m)}else we(u)&&(t.observablePropertyListenerMap[a]=void 0);return h(l),!0},ownKeys(o){return Reflect.ownKeys(o)},getOwnPropertyDescriptor(o,a){if(a in o)return{get value(){return n(o,a)},configurable:!0,enumerable:!0}},has(o,a){return Reflect.has(o,a)}})}function Xr(t){return t?oe(t,e=>e):{}}function es({hostClassNames:t,cssVars:e}){return{hostClasses:oe(t,(r,s)=>({name:A(s),selector:A(`:host(.${s})`)})),cssVars:e}}function ts({host:t,hostClassesInit:e,hostClassNames:r,state:s,inputs:n}){e&&v(e).forEach(i=>{const o=e[i],a=r[i];typeof o=="function"&&(o({state:s,inputs:n})?t.classList.add(a):t.classList.remove(a))})}function rs(t,e){function r(n){v(n).forEach(i=>{const o=n[i];t.instanceState[i]=o})}return{dispatch:n=>t.dispatchEvent(n),updateState:r,inputs:t.instanceInputs,host:t,state:t.instanceState,events:e}}var ss=globalThis&&globalThis.__setFunctionName||function(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})};function de(t){var e;if(!t.renderCallback||typeof t.renderCallback=="string")throw new Error(`Failed to define element '${t.tagName}': renderCallback is not a function`);const r={...Rr,...t.options},s=Vr(t.tagName,t.events),n=Xr(t.hostClasses);t.hostClasses&&rt(t.tagName,t.hostClasses),t.cssVars&&rt(t.tagName,t.cssVars);const i=t.cssVars?wt(t.cssVars):{},o=typeof t.styles=="function"?t.styles(es({hostClassNames:n,cssVars:i})):t.styles||le``,a=t.renderCallback;function c(...[u]){return{_elementVirIsWrappedDefinition:!0,definition:l,inputs:u}}const l=(e=class extends $t{createRenderParams(){return rs(this,s)}get instanceType(){throw new Error(`"instanceType" was called on ${t.tagName} as a value but it is only for types.`)}static get inputsType(){throw new Error(`"inputsType" was called on ${t.tagName} as a value but it is only for types.`)}static get stateType(){throw new Error(`"stateType" was called on ${t.tagName} as a value but it is only for types.`)}render(){this._internalRenderCount++;try{xt(this)&&!this._haveInputsBeenSet&&!r[Me]&&console.warn(this,`${t.tagName} got rendered before its input object was set. This was most likely caused by forgetting to use '.assign()' on its opening tag. If no inputs are intended, use '${de.name}' to define ${t.tagName}.`),this._hasRendered=!0;const u=this.createRenderParams();if(!this._initCalled&&t.initCallback&&(this._initCalled=!0,t.initCallback(u)instanceof Promise))throw new Error("initCallback cannot be asynchronous");const h=a(u);if(h instanceof Promise)throw new Error("renderCallback cannot be asynchronous");return ts({host:u.host,hostClassesInit:t.hostClasses,hostClassNames:n,state:u.state,inputs:u.inputs}),this._lastRenderedProps={inputs:{...u.inputs},state:{...u.state}},h}catch(u){const h=ie(u);throw h.message=`Failed to render '${t.tagName}': ${h.message}`,this._lastRenderError=h,h}}connectedCallback(){if(super.connectedCallback(),this._hasRendered&&!this._initCalled&&t.initCallback){this._initCalled=!0;const u=this.createRenderParams();if(t.initCallback(u)instanceof Promise)throw new Error(`initCallback in '${t.tagName}' cannot be asynchronous`)}}disconnectedCallback(){if(super.disconnectedCallback(),t.cleanupCallback){const u=this.createRenderParams();if(t.cleanupCallback(u)instanceof Promise)throw new Error(`cleanupCallback in '${t.tagName}' cannot be asynchronous`)}this._initCalled=!1}assignInputs(u){Tt(this,u)}constructor(){var h;super(),this._lastRenderError=void 0,this._internalRenderCount=0,this._initCalled=!1,this._hasRendered=!1,this._lastRenderedProps=void 0,this._haveInputsBeenSet=!1,this.definition={},this.observablePropertyListenerMap={},this.instanceInputs=st(this,!1),this.instanceState=st(this,!((h=t.options)!=null&&h.allowPolymorphicState));const u=t.stateInitStatic||{};v(u).forEach(d=>{Ft(this,d),this.instanceState[d]=u[d]}),this.definition=l}},ss(e,"anonymousClass"),e.tagName=t.tagName,e.styles=o,e.assign=c,e.isStrictInstance=()=>!1,e.events=s,e.renderCallback=a,e.hostClasses=n,e.cssVars=i,e.stateInitStatic=t.stateInitStatic,e);return Object.defineProperties(l,{name:{value:Gt(t.tagName,{capitalizeFirstLetter:!0}),writable:!0},isStrictInstance:{value:u=>u instanceof l,writable:!1}}),window.customElements.get(t.tagName)?console.warn(`Tried to define custom element '${t.tagName}' but it is already defined.`):window.customElements.define(t.tagName,l),l}function ns(){return t=>de({...t,options:{[Me]:!1,...t.options}})}function Ht(t,e){return W(t,e),t.element}function is(t){try{return t.options.host.tagName.toLowerCase()}catch{return}}function W(t,e){const r=is(t),s=r?`: in ${r}`:"";if(t.type!==vt.ELEMENT)throw new Error(`${e} directive can only be attached directly to an element${s}.`);if(!t.element)throw new Error(`${e} directive found no element${s}.`)}function os(t,e){return e?nt(t,e):nt(void 0,t)}const nt=ce(class extends I{constructor(t){super(t),this.element=Ht(t,"assign")}render(t,e){return Tt(this.element,e),$}});function K(t,e){return as(t,e)}const as=ce(class extends I{constructor(t){super(t),this.element=Ht(t,"listen")}resetListener(t){this.lastListenerMetaData&&this.element.removeEventListener(this.lastListenerMetaData.eventType,this.lastListenerMetaData.listener),this.element.addEventListener(t.eventType,t.listener),this.lastListenerMetaData=t}createListenerMetaData(t,e){return{eventType:t,callback:e,listener:r=>{var s;return(s=this.lastListenerMetaData)==null?void 0:s.callback(r)}}}render(t,e){const r=typeof t=="string"?t:t.type;if(typeof r!="string")throw new Error(`Cannot listen to an event with a name that is not a string. Given event name: "${r}"`);return this.lastListenerMetaData&&this.lastListenerMetaData.eventType===r?this.lastListenerMetaData.callback=e:this.resetListener(this.createListenerMetaData(r,e)),$}}),it="onDomCreated",cs=ce(class extends I{constructor(t){super(t),W(t,it)}update(t,[e]){W(t,it);const r=t.element;return r!==this.element&&(requestAnimationFrame(()=>e(r)),this.element=r),this.render(e)}render(t){}}),be="onResize",ls=ce(class extends I{constructor(t){super(t),this.resizeObserver=new ResizeObserver(e=>this.fireCallback(e)),W(t,be)}fireCallback(t){var r;const e=t[0];if(!e)throw console.error(t),new Error(`${be} observation triggered but the first entry was empty.`);(r=this.callback)==null||r.call(this,{target:e.target,contentRect:e.contentRect},this.element)}update(t,[e]){W(t,be),this.callback=e;const r=t.element,s=this.element;return r!==s&&(this.element=r,s&&this.resizeObserver.unobserve(s),this.resizeObserver.observe(r)),this.render(e)}render(t){}});function us(t){return{_elementVirStateSetup:t}}function hs(...[t,e,r]){const s=Ce(r)?r.definition:r,n=t.trim().endsWith("<")&&!!e.match(/^[\s\n>]/),i=(t==null?void 0:t.trim().endsWith("</"))&&e.trim().startsWith(">"),o=n||i,a=Ne(s);if(o&&!a)throw console.error({lastNewString:t,currentLitString:e,currentValue:s}),new Error(`Got interpolated tag name but found no tag name on the given value: '${s.prototype.constructor.name}'`);return!o||!a?void 0:{replacement:s.tagName,getExtraValues(l){const u=Ce(l)?l.inputs:void 0;return[n&&u?os(u):void 0].filter(ct)}}}function ds(t){}function fs(t){return At(t.strings,t.values,hs,ds)}function M(t,...e){const r=wr(t,...e),s=Pt(t,e,()=>fs(r));return{...r,strings:s.strings,values:s.values}}var ps=globalThis&&globalThis.__setFunctionName||function(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})};function ms(){return class extends Event{constructor(e,r){super(e,r),this.detail=r.detail}}}const gs=globalThis.CustomEvent||ms();function fe(){return t=>{var e;return e=class extends gs{constructor(s){super(t,s)}},ps(e,"TypedEventConstructor"),e.type=t,e}}globalThis&&globalThis.__setFunctionName;class ys extends EventTarget{constructor(){super(...arguments),this.setupListeners=[]}getListenerCount(){return this.setupListeners.length}addEventListener(e,r,s){super.addEventListener(e,r,s),r&&this.setupListeners.push({type:e,callback:r,options:s})}dispatchEvent(e){return super.dispatchEvent(e)}removeEventListener(e,r,s){super.removeEventListener(e,r,s);const n=this.setupListeners.findIndex(i=>{if(i.type!==e)return!1;if(typeof s<"u"||typeof i.options<"u"){if(typeof s!=typeof i.options||typeof i.options=="boolean"&&typeof s=="boolean"&&s!==i.options)return!1;if(typeof i.options=="object"&&typeof s=="object"&&s.capture!==i.options.capture)return!1}return i.callback===r});this.setupListeners=zt(this.setupListeners,[n])}removeAllEventListeners(){this.setupListeners.forEach(e=>{super.removeEventListener(e.type,e.callback,e.options)}),this.setupListeners=[]}}let vs=class extends fe()("game-pipeline-pause"){},$s=class extends fe()("game-pipeline-framerate"){};var pe=(t=>(t.Circle="circle",t.Square="square",t.Triangle="triangle",t))(pe||{});function ws(t,e){const r=e/2,s=[Math.PI*(90+120)/180,Math.PI*(90+240)/180];return[[t.x,t.y-r],[t.x+r*Math.cos(s[0]),t.y-r*Math.sin(s[0])],[t.x+r*Math.cos(s[1]),t.y-r*Math.sin(s[1])]]}const bs={moduleId:{name:"render canvas",version:1},runModule({gameState:t,executionContext:e}){if(!e.renderContext)return;const r=Math.min(t.canvasSize.width,t.canvasSize.height)/2,s=`hsl(${[t.shape.color.h,Be(t.shape.color.s),Be(t.shape.color.l)].join(" ")})`;e.renderContext.fillStyle="white",e.renderContext.fillRect(0,0,t.canvasSize.width,t.canvasSize.height);const n={x:t.canvasSize.width/2,y:t.canvasSize.height/2};if(e.renderContext.fillStyle=s,t.shape.type==="square"){const i=r/Math.sqrt(2),o={x:n.x-i/2,y:n.y-i/2};e.renderContext.fillRect(o.x,o.y,i,i)}else if(t.shape.type==="circle")e.renderContext.beginPath(),e.renderContext.arc(n.x,n.y,r/2,0,Math.PI*2),e.renderContext.fill();else if(t.shape.type==="triangle"){e.renderContext.beginPath();const i=ws(n,r);e.renderContext.moveTo(i[0][0],i[0][1]),e.renderContext.lineTo(i[1][0],i[1][1]),e.renderContext.lineTo(i[2][0],i[2][1]),e.renderContext.fill()}}},_s={moduleId:{name:"stutter",version:1},async runModule({gameState:t}){if(t.shouldStutter)return await or(1e3),{stateUpdate:{shouldStutter:!1}}}},Es={moduleId:{name:"canvas size",version:1},runModule({executionContext:t}){if(t.canvas)return{stateUpdate:{canvasSize:{width:t.canvas.width,height:t.canvas.height}}}}},Ss={moduleId:{name:"rainbow",version:1},runModule({gameState:t,millisecondsSinceLastFrame:e}){return{stateUpdate:{shape:{color:{h:lt({value:t.shape.color.h+e*t.shape.huePerMillisecond,max:360,min:0})}}}}}};class Cs extends fe()("game-pipeline-pause"){}class Ps extends fe()("game-pipeline-framerate"){}const ot=Symbol("ignore");function xe(t,e,r,s,n=!1,i=!1){const o=Object.entries(t.children).map(([l,u])=>{if(Array.isArray(e))return e.map((h,d)=>{const p=r==null?void 0:r[d];return xe(t,h,p,s,!0)}).some(h=>h);{if(!u||!n&&(!e||!(l in e)))return!1;const h=e==null?void 0:e[l],d=r?r[l]:ot;return xe(u,h,d,s,n,e&&l in e)}}),a=i||o.some(l=>l),c=t.listeners;if(c!=null&&c.size){const l=s.get(c);(n||r!==ot)&&(l?(l.dataValues.push(r),!l.certain&&a&&(l.certain=!0)):s.set(c,{dataValues:[r],isArray:n,certain:a}))}return a}async function As(t,e,r){const s=[],n=new Map;return Object.keys(e).length&&xe({children:{root:t},listeners:void 0},{root:e},{root:r},n),n.forEach((i,o)=>{i.certain&&(o!=null&&o.size)&&s.push(ut(()=>{const a=[];return o.forEach(c=>{if(!i.isArray&&i.dataValues.length>1)throw new Error("Found non array listener value of length more than 1");const l=i.isArray?i.dataValues:i.dataValues[0];a.push(c(l))}),a}))}),Promise.all(s)}class Fe extends ys{constructor(e,r,s,n={}){var i,o,a,c;super(),this.gameModules=e,this.currentFramerate=0,this.framerateOperands={totalDuration:0,frameCount:0},this.isFrameExecuting=!1,this.currentOptions={framerateCalculationWait:{milliseconds:500}},this._loopIsPaused=!0,this.lastFrameCount=0,this.frameHistory=[],this.stateListeners={children:{},listeners:void 0},this.currentState=tr(r),this.currentExecutionContext=s,this.gameModuleIds=this.gameModules.map(l=>l.moduleId),this.internalOverrideOptions(n),(o=(i=this.currentOptions)==null?void 0:i.init)!=null&&o.allowDuplicateModuleNames||this.assertValidGameModules(),(c=(a=this.currentOptions)==null?void 0:a.init)!=null&&c.startLoopImmediately&&this.startPipelineLoop()}assertValidGameModules(){const e=[],r=new Set;if(this.gameModules.forEach(s=>{const n=s.moduleId.name;r.has(n)?e.push(n):r.add(n)}),e.length)throw new Error(`Duplicate modules provided to ${Fe.name}: ${e.join(", ")}`)}set loopIsPaused(e){this._loopIsPaused=e,this.dispatchEvent(new Cs({detail:e}))}get loopIsPaused(){return this._loopIsPaused}isPipelineLoopPaused(){return this.loopIsPaused}stopPipelineLoop(){return this.loopIsPaused?!1:(this.loopIsPaused=!0,!0)}startPipelineLoop(){return this.loopIsPaused?(this.loopIsPaused=!1,this.lastFrameTimestamp=performance.now(),this.runLoop(),!0):!1}runLoop(){window.requestAnimationFrame(e=>{this.loopIsPaused||ut(()=>this.runLoop()),this.internallyTriggerSingleFrame(e)})}calculateFramerate(e){var r;this.framerateOperands.frameCount++,this.framerateOperands.totalDuration+=e,this.framerateOperands.totalDuration>=this.currentOptions.framerateCalculationWait.milliseconds&&(this.currentFramerate=Qt({number:this.framerateOperands.frameCount/this.framerateOperands.totalDuration*1e3,digits:1}),(r=this.currentOptions.debug)!=null&&r.enableWarningLogging&&this.currentOptions.debug.targetFramerate&&this.currentFramerate+1<this.currentOptions.debug.targetFramerate&&console.warn(`Framerate dropped to ${this.currentFramerate}`),this.dispatchEvent(new Ps({detail:this.currentFramerate})),this.framerateOperands={frameCount:0,totalDuration:0})}destroy(){var e;this.stopPipelineLoop(),(e=this.currentOptions.init)!=null&&e.onDestroy&&this.currentOptions.init.onDestroy({gameState:this.currentState,executionContext:this.currentExecutionContext}),this.removeAllEventListeners(),this.removeAllStateListeners()}addEventListener(e,r,s){return super.addEventListener(e,r,s),()=>{super.removeEventListener(e,r,s)}}internalOverrideOptions(e){this.currentOptions=Z(this.currentOptions,e)}overrideOptions(e){if("init"in e)throw new Error("Cannot override init options after the GamePipeline has already been constructed.");this.internalOverrideOptions(e)}triggerSingleFrame(){return this.internallyTriggerSingleFrame(performance.now())}addWholeStateListener(e,r){return this.stateListeners.listeners||(this.stateListeners.listeners=new Set),this.stateListeners.listeners.add(r),e&&r(this.currentState),()=>this.removeWholeStateListener(r)}addStateListener(e,r,s){const n=r.reduce((i,o)=>{const a=i.children[o]||{children:{},listeners:void 0};return i.children[o]||(i.children[o]=a),a},this.stateListeners);return n.listeners||(n.listeners=new Set),n.listeners.add(s),e&&s(Ee(this.currentState,r)),()=>this.removeStateListener(r,s)}removeAllStateListeners(){this.stateListeners={children:{},listeners:void 0}}removeWholeStateListener(e){var r;return(r=this.stateListeners.listeners)==null?void 0:r.delete(e)}removeStateListener(e,r){var s;try{return((s=e.reduce((i,o,a)=>{const c=i.children[o];if(!c)throw new Error(`Failed to find any listener children under key ${e.slice(0,a+1).join("->")}`);return c},this.stateListeners).listeners)==null?void 0:s.delete(r))??!1}catch{return!1}}update(e){this.updateInternally(e,!0)}updateInternally(e,r){e.stateUpdate&&(this.currentState=Z(this.currentState,e.stateUpdate),r&&this.triggerStateListeners([e.stateUpdate])),e.executionContextUpdate&&(this.currentExecutionContext={...this.currentExecutionContext,...e.executionContextUpdate})}triggerStateListeners(e){return As(this.stateListeners,Z(...e),this.currentState)}async internallyTriggerSingleFrame(e){var r,s;if(this.isFrameExecuting){(r=this.currentOptions.debug)!=null&&r.enableWarningLogging&&console.warn("frame skipped");return}this.isFrameExecuting=!0;try{const n=this.lastFrameTimestamp==null?0:e-this.lastFrameTimestamp;this.calculateFramerate(n);const i=[];if(this.lastFrameTimestamp=e,this.lastFrameCount++,await Bt(this.gameModules,async a=>{const c={gameState:this.currentState,executionContext:this.currentExecutionContext,millisecondsSinceLastFrame:n},l=await a.runModule(c);l&&this.updateInternally(l,!1),i.push({fromModule:a.moduleId,stateUpdates:l==null?void 0:l.stateUpdate})}),(s=this.currentOptions.debug)!=null&&s.enableFrameHistory_Expensive){const a={orderedStateUpdates:i};this.frameHistory.push(a)}const o=i.map(a=>a.stateUpdates);return this.isFrameExecuting=!1,this.triggerStateListeners(o.filter(ct))}catch(n){this.isFrameExecuting=!1;const i=ie(n);throw i.message=`Failed to render frame: ${ne(i)}`,i}}}function xs(){return new Fe([Es,bs,Ss,_s],{shape:{color:{h:0,s:100,l:50},huePerMillisecond:.1,type:pe.Triangle},canvasSize:{width:0,height:0},shouldStutter:!1},{canvas:void 0,renderContext:void 0})}const G=de({tagName:"vir-canvas",events:{canvasCreate:ee()},styles:le`
        :host {
            display: flex;
            box-sizing: border-box;
            overflow: hidden;
        }

        .canvas-wrapper {
            display: flex;
            height: 100%;
            width: 100%;
            max-height: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        .error {
            color: red;
            font-weight: bold;
        }
    `,stateInitStatic:{canvasError:void 0},renderCallback({state:t,updateState:e,dispatch:r,events:s}){return t.canvasError?M`
                <p class="error">${ne(t.canvasError)}</p>
            `:M`
            <div
                class="canvas-wrapper"
                ${ls(n=>{const i=n.target.querySelector("canvas");We(i,HTMLCanvasElement),i.width=n.contentRect.width,i.height=n.contentRect.height})}
            >
                <canvas
                    ${cs(n=>{try{We(n,HTMLCanvasElement),r(new s.canvasCreate(n))}catch(i){e({canvasError:ie(i)})}})}
                ></canvas>
            </div>
        `}}),Y=sr(pe);function Ts(t){const e=Y.indexOf(t),r=lt({max:Y.length-1,min:0,value:e+1});return Y[r]??Y[0]}const U=ns()({tagName:"vir-controls",events:{playPipeline:ee(),newShape:ee(),stutter:ee()},styles:le`
        :host {
            display: flex;
            gap: 16px;
            align-items: center;
        }
    `,renderCallback({inputs:t,dispatch:e,events:r}){const n=[{text:t.isPaused?"Play":"Pause",action(){t.isPaused?(console.log("starting"),e(new r.playPipeline(!0))):(console.log("stopping"),e(new r.playPipeline(!1)))}},{text:"Change shape",action(){const i=Ts(t.currentShapeType);console.info(`Changing shape to ${i}`),e(new r.newShape(i))}},{text:"Trigger stutter",action(){e(new r.stutter)}}].map(i=>M`
                <button
                    @click=${()=>{i.action()}}
                >
                    ${i.text}
                </button>
            `);return M`
            <a
                class="github-link"
                rel="noopener noreferrer"
                target="_blank"
                href="https://github.com/electrovir/game-vir/tree/dev/packages/demo"
            >
                <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 98 96">
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"
                        fill="#24292f"
                    />
                </svg>
            </a>
            ${n}
        `}});de({tagName:"vir-game-vir-demo",styles:le`
        :host {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            box-sizing: border-box;
            padding: 16px;
            overflow: hidden;
            gap: 32px;
            max-width: 100%;
            max-height: 100%;
        }

        ${G} {
            border: 1px solid black;
            flex-grow: 1;
        }

        .error {
            color: red;
            font-weight: bold;
        }
    `,stateInitStatic:{gamePipeline:us(xs),pipelineListenerRemovers:[],isPaused:!0,currentShapeType:pe.Circle,error:void 0,framerate:0},initCallback({state:t,updateState:e}){e({pipelineListenerRemovers:[t.gamePipeline.addEventListener(vs.type,r=>{e({isPaused:r.detail})}),t.gamePipeline.addEventListener($s.type,r=>{e({framerate:r.detail})}),t.gamePipeline.addStateListener(!0,["shape","type"],r=>{console.info("state changed shape"),e({currentShapeType:r})})]})},cleanupCallback({state:t}){t.pipelineListenerRemovers.forEach(e=>e())},renderCallback({state:t,updateState:e}){return t.error?M`
                <p class="error">${ne(t.error)}</p>
            `:M`
            <${U.assign({currentShapeType:t.currentShapeType,isPaused:t.isPaused})}
                ${K(U.events.newShape,r=>{t.gamePipeline.update({stateUpdate:{shape:{type:r.detail}}})})}
                ${K(U.events.stutter,()=>{t.gamePipeline.update({stateUpdate:{shouldStutter:!0}})})}
                ${K(U.events.playPipeline,r=>{r.detail?t.gamePipeline.startPipelineLoop():t.gamePipeline.stopPipelineLoop()})}
            ></${U}>
            <p>FPS: ${t.framerate}</p>
            <${G}
                ${K(G.events.canvasCreate,r=>{try{const s=r.detail,n=s.getContext("2d");if(!n)throw new Error("Failed to get 2d render context from canvas element.");t.gamePipeline.update({executionContextUpdate:{canvas:s,renderContext:n}}),t.gamePipeline.startPipelineLoop()}catch(s){e({error:ie(s)})}})}
            ></${G}>
        `}});
